"use strict";angular.module("outTheDoorApp",[]).value("transitConfig",{interval:15e3,url:"http://webservices.nextbus.com/service/publicXMLFeed?command=predictionsForMultiStops&a=ttc&useShortTitles=true&stops=504|2253&stops=504|7211&stops=511|7197",stopTag:{2253:"East - King St West At Bathurst St",7211:"West - King St West At Bathurst St",7197:"North - Bathurst St At King St West"}}).value("weatherConfig",{interval:3e5,url:"https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20weather.forecast%20where%20woeid%20%3D%2012511881%20AND%20u%3D%22c%22&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys"}).factory("weatherIcon",[function(){return function(a){var b;switch(a){case"0":b="wi-tornado";break;case"1":b="wi-storm-showers";break;case"2":b="wi-tornado";break;case"3":b="wi-thunderstorm";break;case"4":b="wi-thunderstorm";break;case"5":b="wi-snow";break;case"6":b="wi-rain-mix";break;case"7":b="wi-rain-mix";break;case"8":b="wi-sprinkle";break;case"9":b="wi-sprinkle";break;case"10":b="wi-hail";break;case"11":b="wi-showers";break;case"12":b="wi-showers";break;case"13":b="wi-snow";break;case"14":b="wi-storm-showers";break;case"15":b="wi-snow";break;case"16":b="wi-snow";break;case"17":b="wi-hail";break;case"18":b="wi-hail";break;case"19":b="wi-cloudy-gusts";break;case"20":b="wi-fog";break;case"21":b="wi-fog";break;case"22":b="wi-fog";break;case"23":b="wi-cloudy-gusts";break;case"24":b="wi-cloudy-windy";break;case"25":b="wi-thermometer";break;case"26":b="wi-cloudy";break;case"27":b="wi-night-cloudy";break;case"28":b="wi-day-cloudy";break;case"29":b="wi-night-cloudy";break;case"30":b="wi-day-cloudy";break;case"31":b="wi-night-clear";break;case"32":b="wi-day-sunny";break;case"33":b="wi-night-clear";break;case"34":b="wi-day-sunny-overcast";break;case"35":b="wi-hail";break;case"36":b="wi-day-sunny";break;case"37":b="wi-thunderstorm";break;case"38":b="wi-thunderstorm";break;case"39":b="wi-thunderstorm";break;case"40":b="wi-storm-showers";break;case"41":b="wi-snow";break;case"42":b="wi-snow";break;case"43":b="wi-snow";break;case"44":b="wi-cloudy";break;case"45":b="wi-lightning";break;case"46":b="wi-snow";break;case"47":b="wi-thunderstorm";break;case"3200":b="wi-cloud";break;default:b="wi-cloud"}return b}}]).controller("TimeController",["$scope","$interval",function(a,b){var c=function(){a.date=new Date};b(c,1e3),c()}]).controller("TransitController",["$scope","$http","$interval","transitConfig",function(a,b,c,d){var e=function(){b.get(d.url).success(function(b){var c=new X2JS({arrayAccessForm:"property"}),e=c.xml_str2json(b);a.transit=[],e.body.predictions_asArray.forEach(function(b){var c=[];b.direction_asArray.forEach(function(a){c=c.concat(a.prediction_asArray)}),c.sort(function(a,b){return parseFloat(a._seconds)-parseFloat(b._seconds)}),b.predictions=c,b._stopTitle=d.stopTag[b._stopTag],a.transit=a.transit.concat(b)})})};c(e,d.interval),e()}]).controller("WeatherController",["$scope","$http","$interval","weatherConfig","weatherIcon",function(a,b,c,d,e){var f=function(){b.get(d.url).success(function(b){if(b.query.results.channel){var c=b.query.results.channel;a.weatherTemp=c.wind.chill?c.wind.chill:c.item.condition.temp,a.weatherIcon=e(c.item.condition.code),a.weatherDescription=c.item.condition.text}})};c(f,d.interval),f()}]);