"use strict";angular.module("outthedoorApp",["ngRoute"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("outthedoorApp").controller("MainCtrl",["$scope","$http",function(a,b){function c(a){switch(a){case"0":return"wi-tornado";case"1":return"wi-storm-showers";case"2":return"wi-tornado";case"3":return"wi-thunderstorm";case"4":return"wi-thunderstorm";case"5":return"wi-snow";case"6":return"wi-rain-mix";case"7":return"wi-rain-mix";case"8":return"wi-sprinkle";case"9":return"wi-sprinkle";case"10":return"wi-hail";case"11":return"wi-showers";case"12":return"wi-showers";case"13":return"wi-snow";case"14":return"wi-storm-showers";case"15":return"wi-snow";case"16":return"wi-snow";case"17":return"wi-hail";case"18":return"wi-hail";case"19":return"wi-cloudy-gusts";case"20":return"wi-fog";case"21":return"wi-fog";case"22":return"wi-fog";case"23":return"wi-cloudy-gusts";case"24":return"wi-cloudy-windy";case"25":return"wi-thermometer";case"26":return"wi-cloudy";case"27":return"wi-night-cloudy";case"28":return"wi-day-cloudy";case"29":return"wi-night-cloudy";case"30":return"wi-day-cloudy";case"31":return"wi-night-clear";case"32":return"wi-day-sunny";case"33":return"wi-night-clear";case"34":return"wi-day-sunny-overcast";case"35":return"wi-hail";case"36":return"wi-day-sunny";case"37":return"wi-thunderstorm";case"38":return"wi-thunderstorm";case"39":return"wi-thunderstorm";case"40":return"wi-storm-showers";case"41":return"wi-snow";case"42":return"wi-snow";case"43":return"wi-snow";case"44":return"wi-cloudy";case"45":return"wi-lightning";case"46":return"wi-snow";case"47":return"wi-thunderstorm";case"3200":return"wi-cloud";default:return"wi-cloud"}}var d=function(){b.get("http://webservices.nextbus.com/service/publicXMLFeed?command=predictionsForMultiStops&a=ttc&useShortTitles=true&stops=504|2253&stops=504|7211&stops=511|7197").success(function(b){var c=new X2JS({arrayAccessForm:"property"}),e=c.xml_str2json(b);a.transit=[],e.body.predictions_asArray.forEach(function(b){var c=[];b.direction_asArray.forEach(function(a){c=c.concat(a.prediction_asArray)}),c.sort(function(a,b){return parseFloat(a._seconds)-parseFloat(b._seconds)}),b.predictions=c,"2253"===b._stopTag&&(b._stopTitle="East - King St West At Bathurst St"),"7211"===b._stopTag&&(b._stopTitle="West - King St West At Bathurst St"),"7197"===b._stopTag&&(b._stopTitle="North - Bathurst St At King St West"),a.transit=a.transit.concat(b)}),setTimeout(function(){d()},15e3)})},e=function(){b.get("https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20weather.forecast%20where%20woeid%20%3D%2012511881%20AND%20u%3D%22c%22&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys").success(function(b){if(b.query.results.channel){var e=b.query.results.channel;a.weatherTemp=e.wind.chill?e.wind.chill:e.item.condition.temp,a.weatherIcon=c(e.item.condition.code),a.weatherDescription=e.item.condition.text}setTimeout(function(){d()},3e5)})};d(),e()}]);